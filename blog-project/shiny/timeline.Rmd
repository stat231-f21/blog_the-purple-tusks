---
title: "Timeline"
author: 
date: "11/1/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(shiny)
library(shinythemes)
library(tidyverse)
library(formatR)
library(DT)
library(ggrepel)
library(csv)
library(ggplot2)
```

```{r combine-data}
covid_19 <- read_csv("covid-19.csv")
mental_health <- read_csv("mental_health.csv")

covid_19 <- covid_19 %>%
  subset(select = -c(...1)) %>%
  rename(percentage_cases_state = percentage_cases_bar, percentage_deaths_state = percentage_deaths_bar)

mental_health <- mental_health %>%
  rename(state = State, week = WEEK)

covid_mental_health <- inner_join(mental_health, covid_19, by = c("state", "week"))

covid_mental_health_longer <- covid_mental_health %>%
  pivot_longer(cols = c("anxiety_percentage", "depression_percentage", "percentage_cases_state", "percentage_deaths_state"),
               names_to = "Response",
               values_to = "Percentage")

write_csv(covid_mental_health_longer, "covid_mental_health_longer.csv", append = FALSE)
write_csv(covid_mental_health, "covid_mental_health.csv", append = FALSE)
```


```{r ggplot}
# Basic line plot with points
graph <- ggplot(covid_mental_health, aes(x=week)) + 
  geom_point(aes(x=week, y=anxiety_percentage), color="red") +
  geom_point(aes(x=week, y=depression_percentage), color="blue") +
  geom_point(aes(y=percentage_cases_state),color="orange") +
  geom_point(aes(y=percentage_deaths_state),color="pink") +
  geom_line(aes(y=anxiety_percentage), color="red") +
  geom_line(aes(y=depression_percentage), color="blue") +
  geom_line(aes(y=percentage_cases_state), color="orange") +
  geom_line(aes(y=percentage_deaths_state, color="pink")) +
  scale_y_continuous(trans='log10')

graph

```


